# POC-MarketPredictor-ML Technical Specification

**Version:** 0.9.0  
**Last Updated:** February 2025  
**Status:** Beta â€“ simulation + ranking flows implemented, hardening in progress

---

## 1. System Overview

POC-MarketPredictor-ML is a FastAPI + React application for ranking equities/crypto and providing ML-based predictions. Core modules:

- **Backend** (`src/trading_engine/`)
  - `server.py`: FastAPI entry point exposing ranking, prediction, and ML endpoints.
  - `trading.py`: Trading and ranking logic that powers `/ranking` and related routes.
  - `crypto.py`: Crypto rankings and details.
  - `services.py`, `cache.py`: Shared service wiring and caching.
  - `market_regime.py`, `composite_scoring.py`, `risk_scoring.py`: Phase 1-4 ML enhancements.
- **Frontend** (`frontend/`)
  - React (Vite) app that consumes `/ranking`, `/predict_ticker/{ticker}` endpoints.
  - Dark/light theme and localization support.
- **Training / Jobs** (`training/`, `scripts/`)
  - Model training and evaluation helpers plus CLI scripts for data refreshes.

---

## 2. API Surface (v0.9.0)

- **Ranking & Prediction**: `/ranking`, `/predict_ticker/{ticker}`, `/ticker_info/{ticker}`
- **Crypto**: `/crypto/ranking`, `/crypto/details/{crypto_id}`, `/crypto/search`
- **ML Endpoints**: `/api/ml/model/info`, `/api/ml/retraining`
- **Health & Metrics**: `/health`, `/prometheus`

The OpenAPI schema is generated by FastAPI in `server.py`.

---

## 3. Data & Persistence

- **Caching**: Optional Redis cache (see `cache.py`) to reduce duplicate lookups.
- **Models**: ML models stored as joblib files in `models/` directory.

---

## 4. ML Pipeline

- **Market Regime Detection**: Identifies bull/bear/volatile market conditions.
- **Composite Scoring**: Combines technical, fundamental, and ML signals.
- **Risk Scoring**: Evaluates position risk with stop-loss recommendations.
- **Model Retraining**: Scheduled model updates with MLflow tracking.

Tests cover these rules in `tests/ml/` and `tests/phase1/`.

---

## 5. Deployment & Operations

- Containerized via Dockerfile; `docker-compose.yml` wires backend + frontend.
- `render.yaml`, `railway.toml`, and `netlify.toml` provide hosted deployment templates.
- **Next steps**: finalize environment profiles (dev/stage/prod), add structured logging for simulations, and validate deployments with smoke tests.

---

## 6. Documentation Map

- Backlog & priorities: `docs/project/backlog.md`
- Getting started: `README.md` and `docs/getting-started/index.md`
- Deployment: `docs/deployment/DEPLOYMENT_GUIDE.md`
- Historical context: `docs/history/` (kept for reference)
